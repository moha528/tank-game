<!doctype html>
<html lang="fr">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Tank Arena - Prototype</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <main class="layout">
      <section class="game-wrapper">
        <canvas id="game" width="960" height="600" aria-label="Jeu de tank"></canvas>
        <button class="hud-toggle" id="open-hangar" type="button">Hangar &amp; Boutique</button>
        <div class="game-overlay menu" id="main-menu">
          <div class="menu-frame">
            <div class="menu-header">
              <p class="menu-kicker">Hangar tactique</p>
              <h2>Menu Principal</h2>
              <p class="menu-subtitle">
                Préparez vos systèmes, choisissez un mode de jeu et lancez l'opération.
              </p>
            </div>
            <div class="menu-modes" id="mode-options">
              <button class="mode-card is-active" data-mode="training">
                <span class="mode-title">Entraînement Sandbox</span>
                <span class="mode-desc">Terrain libre, objectifs personnalisés, pas de pression.</span>
              </button>
              <button class="mode-card" data-mode="bot-battle">
                <span class="mode-title">Combat Bot</span>
                <span class="mode-desc">Escarmouche rapide contre des IA tactiques.</span>
              </button>
              <button class="mode-card" data-mode="online">
                <span class="mode-title">En ligne</span>
                <span class="mode-desc">Salons, invitations par code et configuration des matchs.</span>
              </button>
            </div>
            <div class="menu-footer">
              <div class="menu-info" id="mode-details"></div>
              <button class="menu-cta" id="start-mission">Lancer la mission</button>
            </div>
            <div class="online-panel" id="online-panel" aria-live="polite">
              <div class="online-grid">
                <div class="online-card">
                  <h3>Profil opérateur</h3>
                  <label class="field">
                    <span>Nom d'appel</span>
                    <input id="online-name" type="text" maxlength="18" autocomplete="nickname" />
                  </label>
                  <button id="save-online-name" type="button">Enregistrer</button>
                  <p class="online-hint" id="online-name-status"></p>
                </div>
                <div class="online-card">
                  <h3>Créer un salon</h3>
                  <label class="field">
                    <span>Nom du salon</span>
                    <input id="room-name" type="text" maxlength="24" placeholder="Escouade Alpha" />
                  </label>
                  <div class="field-row">
                    <label class="field">
                      <span>Région</span>
                      <select id="room-region">
                        <option value="EU-Ouest">EU-Ouest</option>
                        <option value="EU-Est">EU-Est</option>
                        <option value="US-Est">US-Est</option>
                        <option value="US-Ouest">US-Ouest</option>
                        <option value="Asie">Asie</option>
                      </select>
                    </label>
                    <label class="field">
                      <span>Confidentialité</span>
                      <select id="room-privacy">
                        <option value="public">Public</option>
                        <option value="private">Privé</option>
                      </select>
                    </label>
                  </div>
                  <label class="field">
                    <span>Nombre de places</span>
                    <select id="room-size">
                      <option value="2">2</option>
                      <option value="3">3</option>
                      <option value="4" selected>4</option>
                      <option value="5">5</option>
                      <option value="6">6</option>
                    </select>
                  </label>
                  <button id="create-room" type="button">Créer le salon</button>
                  <p class="online-hint" id="create-room-status"></p>
                </div>
                <div class="online-card">
                  <h3>Rejoindre via code</h3>
                  <label class="field">
                    <span>Code d'invitation</span>
                    <input id="join-code" type="text" maxlength="8" placeholder="ABCD12" />
                  </label>
                  <button id="join-room" type="button">Rejoindre</button>
                  <p class="online-hint" id="join-room-status"></p>
                </div>
              </div>
              <div class="online-room-list">
                <div class="online-section-header">
                  <h3>Salons disponibles</h3>
                  <button class="ghost-button" id="refresh-rooms" type="button">Actualiser</button>
                </div>
                <div id="room-list" class="room-list"></div>
              </div>
              <div class="online-room-detail" id="active-room-panel"></div>
            </div>
          </div>
        </div>
        <div class="game-overlay loading" id="loading-screen">
          <div class="loading-card">
            <div class="spinner"></div>
            <h3>Chargement des systèmes</h3>
            <p id="loading-status">Calibration des moteurs...</p>
            <div class="loading-bar">
              <div class="loading-progress" id="loading-progress"></div>
            </div>
          </div>
        </div>
        <div class="game-overlay pause" id="pause-menu">
          <div class="menu-frame">
            <div class="menu-header">
              <p class="menu-kicker">Opération suspendue</p>
              <h2>Pause</h2>
              <p class="menu-subtitle">Respirez, ajustez votre stratégie et relancez quand vous êtes prêt.</p>
            </div>
            <div class="menu-actions">
              <button class="menu-cta" id="resume-mission">Reprendre</button>
              <button class="menu-cta ghost" id="exit-mission">Retour au menu</button>
            </div>
          </div>
        </div>
        <div class="game-overlay end" id="end-screen">
          <div class="menu-frame">
            <div class="menu-header">
              <p class="menu-kicker">Mission terminée</p>
              <h2>Débriefing</h2>
              <p class="menu-subtitle" id="end-summary">Fin de simulation.</p>
            </div>
            <div class="menu-scoreboard">
              <div>
                <p class="hud-label">Score final</p>
                <p class="hud-value" id="end-score">0</p>
              </div>
              <div>
                <p class="hud-label">Meilleur score</p>
                <p class="hud-value" id="best-score">0</p>
              </div>
            </div>
            <div class="leaderboard">
              <p class="hud-label">Leaderboard Combat Bot</p>
              <ol id="leaderboard-list"></ol>
            </div>
            <div class="menu-actions">
              <button class="menu-cta" id="restart-mission">Relancer</button>
              <button class="menu-cta ghost" id="back-to-menu">Retour au menu</button>
            </div>
          </div>
        </div>
        <div class="hud" id="hud">
          <div class="hud-top">
            <div class="hud-card">
              <p class="hud-label">Mode</p>
              <p class="hud-value" id="hud-mode">Entraînement Sandbox</p>
              <p class="hud-muted" id="hud-objective">Déployez-vous et testez vos armes.</p>
            </div>
            <div class="hud-card">
              <p class="hud-label">Systèmes</p>
              <p class="hud-value" id="hud-systems">Boucliers actifs</p>
              <div class="hud-pills">
                <span class="pill">Radar</span>
                <span class="pill">Munitions</span>
                <span class="pill">IA</span>
              </div>
            </div>
            <div class="hud-card">
              <p class="hud-label">Combat</p>
              <p class="hud-value" id="hud-enemies">Ennemis : 0</p>
              <p class="hud-muted" id="hud-wave">Vague 1 / 3</p>
              <p class="hud-muted" id="hud-wave-status">En attente</p>
            </div>
          </div>
          <div class="hud-bottom">
            <div class="hud-bar">
              <span>Intégrité</span>
              <div class="bar">
                <div class="bar-fill" id="health-bar"></div>
              </div>
            </div>
            <div class="hud-bar">
              <span>Énergie arme</span>
              <div class="bar">
                <div class="bar-fill energy" id="energy-bar"></div>
              </div>
            </div>
            <div class="hud-bar">
              <span>Munitions</span>
              <div class="bar">
                <div class="bar-fill ammo" id="ammo-bar"></div>
              </div>
            </div>
            <div class="hud-readouts">
              <div>
                <p class="hud-label">Tank</p>
                <p class="hud-value" id="hud-tank">Scout</p>
              </div>
              <div>
                <p class="hud-label">Arme</p>
                <p class="hud-value" id="hud-weapon">Canon</p>
              </div>
              <div>
                <p class="hud-label">Score</p>
                <p class="hud-value" id="hud-score">0</p>
              </div>
              <div>
                <p class="hud-label">Crédits</p>
                <p class="hud-value" id="hud-cash">0</p>
              </div>
            </div>
          </div>
        </div>
        <div class="game-overlay hangar" id="hangar-panel" aria-modal="true" role="dialog">
          <div class="menu-frame hangar-frame">
            <div class="menu-header">
              <p class="menu-kicker">Centre tactique</p>
              <h2>Interface de bord</h2>
              <p class="menu-subtitle">
                Ajustez votre tank, achetez des améliorations et consultez les commandes sans quitter la zone de combat.
              </p>
            </div>
            <div class="hangar-tabs" role="tablist">
              <button class="hangar-tab is-active" data-tab="loadout" role="tab" type="button">Loadout</button>
              <button class="hangar-tab" data-tab="shop" role="tab" type="button">Armurerie</button>
              <button class="hangar-tab" data-tab="controls" role="tab" type="button">Commandes</button>
            </div>
            <div class="hangar-body">
              <section class="hangar-section is-active" data-tab="loadout" role="tabpanel">
                <div class="controls">
                  <div>
                    <h2>Tank</h2>
                    <div class="button-row" id="tank-options">
                      <button data-tank="scout" class="is-active">Scout</button>
                      <button data-tank="brute">Brute</button>
                      <button data-tank="striker">Striker</button>
                      <button data-tank="bastion">Bastion</button>
                    </div>
                  </div>
                  <div>
                    <h2>Arme</h2>
                    <div class="button-row" id="weapon-options">
                      <button data-weapon="cannon" class="is-active">Canon</button>
                      <button data-weapon="scatter">Scatter</button>
                      <button data-weapon="lancer">Lancer</button>
                      <button data-weapon="burst">Burst</button>
                    </div>
                  </div>
                </div>
              </section>
              <section class="hangar-section" data-tab="shop" role="tabpanel">
                <div class="shop-panel">
                  <div class="shop-balance">
                    <span>Crédits</span>
                    <strong id="cash-balance">0</strong>
                  </div>
                  <div class="shop-group">
                    <p class="shop-title">Tanks</p>
                    <div class="shop-grid" id="tank-shop"></div>
                  </div>
                  <div class="shop-group">
                    <p class="shop-title">Armes</p>
                    <div class="shop-grid" id="weapon-shop"></div>
                  </div>
                  <div class="shop-group">
                    <p class="shop-title">Munitions</p>
                    <div class="shop-grid" id="ammo-shop"></div>
                  </div>
                  <div class="shop-group">
                    <p class="shop-title">Améliorations de tank</p>
                    <div class="shop-grid" id="upgrade-shop"></div>
                  </div>
                </div>
              </section>
              <section class="hangar-section" data-tab="controls" role="tabpanel">
                <div class="controls">
                  <h2>Commandes</h2>
                  <ul class="legend">
                    <li>Déplacement : ZQSD / WASD / Flèches</li>
                    <li>Tirer : Espace</li>
                    <li>Changer d'arme : 1 / 2 / 3 / 4</li>
                    <li>Pause / reprise : Échap</li>
                    <li>Afficher le HUD : H / Tab</li>
                    <li>Ouvrir le hangar : bouton "Hangar &amp; Boutique"</li>
                  </ul>
                </div>
              </section>
            </div>
            <div class="menu-actions">
              <button class="menu-cta ghost" id="close-hangar" type="button">Retour au jeu</button>
            </div>
          </div>
        </div>
      </section>
    </main>
    <script type="module" src="js/game.js"></script>
  </body>
</html>
